<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>ç”Ÿæ—¥å¿«ä¹</title>

<style>
body{
  margin:0;
  overflow:hidden;
  background:black;
  touch-action:none;
  user-select:none;
  font-family:"PingFang SC",Arial,sans-serif;
}
canvas{display:block}

/* å¼€å§‹æç¤º */
#startScreen{
  position:absolute;
  top:50%;left:50%;
  transform:translate(-50%,-50%);
  font-size:4em;
  color:white;
  text-align:center;
  cursor:pointer;
  z-index:5;
  animation:bounce 1.2s infinite alternate;
  text-shadow:0 0 14px hotpink;
}
@keyframes bounce{
  from{transform:translate(-50%,-50%) scale(1)}
  to{transform:translate(-50%,-60%) scale(1.08)}
}

/* ç”Ÿæ—¥å¿«ä¹æ–‡å­— */
#finalMessage{
  position:absolute;
  top:48%;left:50%;
  transform:translate(-50%,-40%);
  font-size:2.4em;
  font-weight:600;
  background:linear-gradient(90deg,#ffb7b2,#ff9aa2,#f6c1ff);
  -webkit-background-clip:text;
  color:transparent;
  opacity:0;
  animation:fadeRise 3s ease-out forwards,
           glowBreath 3s ease-in-out infinite;
  display:none;
  z-index:3;
  pointer-events:none;
}
@keyframes fadeRise{
  from{opacity:0;transform:translate(-50%,-20%)}
  to{opacity:1;transform:translate(-50%,-40%)}
}
@keyframes glowBreath{
  0%{filter:drop-shadow(0 0 4px #ffb7b2)}
  50%{filter:drop-shadow(0 0 14px #ff9aa2)}
  100%{filter:drop-shadow(0 0 4px #ffb7b2)}
}
</style>
</head>

<body>

<div id="startScreen">ğŸ‘†</div>
<div id="finalMessage">ğŸ‰ ç”Ÿæ—¥å¿«ä¹ ğŸ‰</div>
<canvas id="canvas"></canvas>

<script>
/* ================== ğŸµ ç”Ÿæ—¥æ­Œï¼ˆBase64ï¼ŒçŸ­å¾ªç¯ç‰ˆï¼‰ ================== */
const birthdayMusic = new Audio(
"data:audio/mp3;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCA..."
);
/* âš ï¸ ä¸ºäº†ä¸åˆ·å±ï¼Œæˆ‘è¿™é‡Œçœç•¥äº† Base64 çš„ä¸­æ®µ
   ğŸ‘‰ ä½ å®é™…ä½¿ç”¨æ—¶ï¼Œæˆ‘å¯ä»¥ç»™ä½ å®Œæ•´å¯ç”¨çš„ä¸€æ•´æ®µ */
birthdayMusic.loop = true;
birthdayMusic.volume = 0.6;

/* ================== åŸºç¡€è®¾ç½® ================== */
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;

let particles=[];
let started=false;
let messageShown=false;

const COLORS=[
  "#ff9aa2","#ffb7b2","#ffdac1",
  "#e2f0cb","#b5ead7","#c7ceea","#f6c1ff"
];

class Particle{
  constructor(x,y,vx,vy,color){
    this.x=x;this.y=y;
    this.vx=vx;this.vy=vy;
    this.alpha=1;
    this.color=color;
  }
  update(){
    this.x+=this.vx;
    this.y+=this.vy;
    this.alpha-=0.015;
  }
  draw(){
    ctx.globalAlpha=this.alpha;
    ctx.fillStyle=this.color;
    ctx.beginPath();
    ctx.arc(this.x,this.y,1.6,0,Math.PI*2);
    ctx.fill();
  }
}

function firework(x,y){
  const c=COLORS[Math.floor(Math.random()*COLORS.length)];
  for(let i=0;i<36;i++){
    particles.push(new Particle(
      x,y,
      (Math.random()-0.5)*4.5,
      (Math.random()-0.5)*4.5,
      c
    ));
  }
}

function animate(){
  ctx.fillStyle="rgba(0,0,0,0.14)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  for(let i=particles.length-1;i>=0;i--){
    particles[i].update();
    particles[i].draw();
    if(particles[i].alpha<=0) particles.splice(i,1);
  }
  requestAnimationFrame(animate);
}
animate();

/* ================== å¯åŠ¨ï¼ˆå…³é”®ï¼šéŸ³ä¹å¿…é¡»åœ¨ç‚¹å‡»é‡Œï¼‰ ================== */
document.getElementById("startScreen").onclick=()=>{
  document.getElementById("startScreen").style.display="none";
  started=true;

  // âœ… æ‰‹æœºå…è®¸æ’­æ”¾å£°éŸ³çš„å…³é”®
  birthdayMusic.play().catch(()=>{});

  firework(canvas.width/2,canvas.height/2);
  setInterval(()=>firework(
    Math.random()*canvas.width,
    Math.random()*canvas.height*0.65
  ),420);

  setTimeout(()=>{
    document.getElementById("finalMessage").style.display="block";
    messageShown=true;
  },8000);
};

/* ================== ç‚¹å‡»äº’åŠ¨ ================== */
canvas.addEventListener("pointerdown",e=>{
  if(!started||!messageShown) return;
  firework(e.clientX,e.clientY);
});

onresize=()=>{
  canvas.width=innerWidth;
  canvas.height=innerHeight;
};
</script>

</body>
</html>
