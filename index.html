<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>ç”Ÿæ—¥å¿«ä¹</title>
<style>
body {
  margin: 0;
  background: #000;
  overflow: hidden;
  touch-action: none;
  user-select: none;
}
canvas { display: block; }

/* å¼€å§‹æç¤º */
#startScreen {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  font-size: 3.5em;
  color: #ffd1dc;
  text-shadow: 0 0 15px hotpink;
  cursor: pointer;
  z-index: 5;
  animation: bounce 1.2s infinite alternate;
  text-align: center;
}
#startScreen span {
  display: block;
  font-size: 0.35em;
  margin-top: 10px;
  color: #fff;
}
@keyframes bounce {
  from { transform: translate(-50%, -50%) scale(1); }
  to   { transform: translate(-50%, -58%) scale(1.08); }
}

/* ç¥ç¦æ–‡å­— */
#finalMessage {
  position: absolute;
  top: 18%;
  left: 50%;
  transform: translateX(-50%);
  font-size: 3.2em;
  font-weight: bold;
  color: #ffd1dc;
  text-shadow: 0 0 25px hotpink;
  display: none;
  z-index: 3;
  pointer-events: none;
}

/* å¿ƒå½¢é‡Œçš„åå­— */
.name-heart {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  font-size: 2.6em;
  color: #ffd1dc;
  text-shadow: 0 0 20px hotpink;
  opacity: 0;
  animation: nameFade 3.5s ease forwards;
  pointer-events: none;
  z-index: 4;
}

@keyframes nameFade {
  0%   { opacity: 0; transform: translate(-50%, -30%); }
  20%  { opacity: 1; }
  80%  { opacity: 1; }
  100% { opacity: 0; transform: translate(-50%, -60%); }
}
</style>
</head>
<body>

<div id="startScreen">ğŸ‘†<span>è½»è§¦å¼€å§‹</span></div>
<div id="finalMessage"></div>
<canvas id="canvas"></canvas>

<script>
// ===================== åŸºæœ¬è®¾ç½® =====================
const NAME = "ç»šä¸½";   // â† æ”¹åå­—
const COLORS = ["#ffd1dc", "#ffb6c1", "#fff1b8", "#e6ccff"];

const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

const startScreen = document.getElementById("startScreen");
const finalMessage = document.getElementById("finalMessage");
finalMessage.innerText = `ğŸ‰ ç”Ÿæ—¥å¿«ä¹ï¼Œ${NAME} ğŸ‰`;

let particles = [];
let started = false;
let messageShown = false;

// ===================== ç²’å­ç±»ï¼ˆæ›´æ…¢ã€æ›´å¤§ï¼‰ =====================
class Particle {
  constructor(x, y, vx, vy, color) {
    this.x = x;
    this.y = y;
    this.vx = vx;
    this.vy = vy;
    this.life = 1;
    this.color = color;
    this.size = Math.random() * 2 + 2;
  }
  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.vy += 0.015;
    this.life -= 0.008;
  }
  draw() {
    ctx.globalAlpha = this.life;
    ctx.fillStyle = this.color;
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fill();
  }
}

// ===================== æŸ”å’ŒçƒŸèŠ± =====================
function softFirework(x, y) {
  const color = COLORS[Math.floor(Math.random() * COLORS.length)];
  for (let i = 0; i < 32; i++) {
    const angle = Math.random() * Math.PI * 2;
    const speed = Math.random() * 2 + 1;
    particles.push(new Particle(
      x, y,
      Math.cos(angle) * speed,
      Math.sin(angle) * speed,
      color
    ));
  }
}

// ===================== å¿ƒå½¢ + åå­— =====================
function heartWithName(x, y) {
  const color = "#ff9acb";
  for (let t = 0; t < Math.PI * 2; t += 0.15) {
    const hx = 16 * Math.pow(Math.sin(t), 3);
    const hy = -(13 * Math.cos(t) - 5 * Math.cos(2*t));
    particles.push(new Particle(
      x, y,
      hx * 0.06,
      hy * 0.06,
      color
    ));
  }

  const nameEl = document.createElement("div");
  nameEl.className = "name-heart";
  nameEl.innerText = NAME;
  nameEl.style.left = x + "px";
  nameEl.style.top = y + "px";
  document.body.appendChild(nameEl);
  setTimeout(() => nameEl.remove(), 3600);
}

// ===================== åŠ¨ç”» =====================
function animate() {
  ctx.fillStyle = "rgba(0,0,0,0.18)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  for (let i = particles.length - 1; i >= 0; i--) {
    const p = particles[i];
    p.update();
    p.draw();
    if (p.life <= 0) particles.splice(i, 1);
  }
  requestAnimationFrame(animate);
}
animate();

// ===================== äº¤äº’ =====================
startScreen.onclick = () => {
  startScreen.style.display = "none";
  started = true;

  setInterval(() => {
    if (particles.length < 150) {
      softFirework(
        Math.random() * canvas.width,
        Math.random() * canvas.height * 0.6
      );
    }
  }, 900);

  setTimeout(() => {
    finalMessage.style.display = "block";
    messageShown = true;
  }, 6000);
};

let lastTap = 0;
canvas.addEventListener("pointerdown", e => {
  if (!started || !messageShown) return;
  const now = Date.now();
  if (now - lastTap < 300) {
    heartWithName(e.clientX, e.clientY);
  } else {
    softFirework(e.clientX, e.clientY);
  }
  lastTap = now;
});

onresize = () => {
  canvas.width = innerWidth;
  canvas.height = innerHeight;
};
</script>

</body>
</html>
